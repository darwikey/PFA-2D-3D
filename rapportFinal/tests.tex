\paragraph{}
Pour valider la réalisation des besoins fonctionnels et non fonctionnels présentés dans le cahier des charges, une série de tests a été effectuée sur le logiciel.

\subsubsection{Tests fonctionnels}
\paragraph{}
Concernant les besoins fonctionnels, nous avons manipulé le logiciel sous les différents systèmes d'exploitation envisagés, à savoir Windows et Linux. Les procédures de tests ont été listées en Annexe.
Les différentes rotations de la caméra autour de la scène ont bien été implémentées, permettant à l'utilisateur de voir les objets qui y sont placés sous différents angles, et de s'en rapprocher ou de s'en éloigner grâce au zoom. La translation de la caméra a également été implémentée, même si son utilisation nécessite une souris.
Les objets sont issus de fichiers d'extension OBJ version 3.0, ASCII, ou PLY, versions 1.0, ASCII et binaire. Ceux-ci peuvent ensuite être sélectionnés un par un, en cliquant sur la scène ou sur son nom dans la liste des objets. L'utilisateur peut alors les déplacer grâce à des translations et rotations selon trois axes, et modifier leur taille. Ils pourront également être supprimés de la scène.
Enfin, les différents rendus prévus ont pu être obtenus à partir de la scène. Pour chacun d'entre eux, une nouvelle fenêtre est ouverte, proposant les paramètres modifiables pour la génération des photographies, anaglyphes, autostéréogrammes, et folioscopes. Pour chacun d'entre eux, on proposera une prévisualisation, et la possibilité d'enregistrer les images intermédiaires ayant permis ce résultat, à savoir les vues gauche et droite pour les anaglyphes, la carte des profondeurs pour les autostéréogrammes, et chaque image du folioscope permettant d'obtenir un GIF animé.
Comme prévu, même si l'utilisateur ne demande pas d'enregistrer la scène, une sauvegarde automatique a été mise en place à intervalles de temps régulier. Elle permet de s'assurer que même en cas d'arrêt non souhaité du logiciel, seules les dernières modifications seront perdues.

\subsubsection{Tests de validation}
\paragraph{}
Les tests des besoins non fonctionnels ont permis de valider la portabilité et la fluidité du logiciel. L'extensibilité du logiciel aura été permise par l'architecture du logiciel, qui a été présentée dans la partie Réalisation du projet.

\paragraph{}
Pour s'assurer de la portabilité du logiciel, nous avons effectué les manipulations de tests des besoins fonctionnels sur les différentes machines de notre équipe de programmeur. Ces machines utilisent les systèmes d'exploitation Linux et Windows, et possèdent soit une carte graphique soit un chipset graphique. Les machines de tests possédant une carte graphique sont données dans la figure \ref{tab:machines_cg}.

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|}
      \hline
      Système d'exploitation & Système graphique & Mémoire RAM \\ \hline \hline
      Windows 7 IntelCore I7 64bits & NVIDIA GetForce GTX 770 & 8Go DDR3 \\ \hline
      Windows 7 IntelCore I5 64bits & NVIDIA GetForce GTX 760 & 8Go DDR3 \\ \hline
      Windows 8 64bits & GT720M & 4GoDDR3 \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Machines de tests avec carte graphique}
  \label{tab:machines_cg}
\end{figure}

Les machines de tests possédant un chipset sont données dans la figure \ref{tab:machines_chip}.

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|}
      \hline
      Système d'exploitation & Système graphique & Mémoire RAM \\ \hline \hline
      Windows 7 IntelCore I5 64bits & Intel HD Graphics 4000 & 8GoDDR3 \\ \hline
      Fedora 21 IntelCore I3 64bits & Intel HD Graphics 4000 & 4GoDDR3 \\ \hline
      Debian Jessie IntelCore I7 64 bits & Intel HD Graphics 4000 & 4GoDDR3 \\ \hline
      ArchLinux & Intel Mobile Series 4 & \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Machines de tests avec Chipset graphique}
  \label{tab:machines_chip}
\end{figure}

\paragraph{}
Nous avons pu ainsi nous assurer de la portabilité de notre logiciel sur la plupart des machines présentées dans le cahier des charges. Toutefois, le logiciel n'a pas pu être testé sur la machine Windows XP 32bits qui était prévue à cause de difficultés avec les outils du logiciel, notamment pour l'utilisation de CMake.

\paragraph{}
La fluidité du logiciel a été testée grâce aux modèles happy.ply et blade.ply qui sont présentés dans la figure \ref{tab:modeles}. Les valeurs de ``frames par seconde'' (FPS) ont été testées grâce au logiciel Fraps\footnotemark sous windows et au module frapix\footnotemark sous linux. Les résultats sont donnés dans la figure \ref{tab:fps_cg} pour les machines avec carte graphique, et dans la figure \ref{tab:fps_chip} pour les machines avec chipset.

\footnotetext{\url{http://www.fraps.com/}}
\footnotetext{\url{https://github.com/jtsiomb/frapix}}

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|}
      \hline
      Nom du modèle & Nombre de sommets & Nombre de faces \\ \hline
      happy.ply & 543 652 & 1 087 716 \\ \hline
      blade.ply & 882 954 & 1 765 388 \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Modèles testés lors de la fluidité d'affichage}
  \label{tab:modeles}
\end{figure}

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|}
      \hline
      Système d'exploitation & Windows 7 IntelCore I7 64bits & Windows 7 IntelCore I5 64bits & Windows 8 64bits\\ \hline
      Carte graphique &  NVIDIA GetForce GTX 770 & NVIDIA GetForce GTX 760 & GT360M \\ \hline
      Mémoire RAM & 8GoDDR3 & 8GoDDR3 & 4GoDDR3 \\ \hline \hline
      happy.ply & 60fps & 60fps & 84fps \\ \hline
      blade.ply & 60fps & 60fps & 60fps\\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Test de fluidité sur les machines avec carte graphique}
  \label{tab:fps_cg}
\end{figure}

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|c|}
      \hline
      Système d'exploitation & Windows 7 IntelCore I5 & Fedora 21 IntelCore I3 & Debian Jessie IntelCore I7 & ArchLinux \\ \hline
      Chipset graphique &  Intel HD Graphics 4000 & Intel HD Graphics 4000 & Intel HD Graphics 4000 & Intel Mobile Series 4 \\ \hline
      Mémoire RAM & 8GoDDR3 & 4GoDDR3  & 6GoDDR3 & -\\ \hline \hline
      happy.ply & 55fps & 60fps & 47fps & 8fps\\ \hline
      blade.ply & 35fps & 50fps & 32fps & 5fps\\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Test de fluidité sur les machines avec chipset graphique}
  \label{tab:fps_chip}
\end{figure}

\paragraph{}
Notre cahier des charges prévoyait pour les machines à carte graphique une fluidité de 25 fps pour un minimum de 350 000 points, et pour les machines à chipset graphique une fluidité de 25 fps pour un minimum de 100 000 sommets. La seule machine qui ne parvient pas à ces capacités est celle utilisant ArchLinux comme système d'exploitation. Toutefois, lors des essais pour le cahier des charges, cette machine ne permettait pas l'ouverture du fichier 'happy.ply' sous Meshlab, et avait été mise à l'écart car son chipset était moins récent qu'un chipset Inter HD Graphics 4000. Le logiciel répond donc bien aux besoins en fluidité demandé dans le cahier des charges.

\subsubsection{Test de charge}
Pour tester les limites de notre logiciel, nous avons choisi d'importer plusieurs exemplaires d'un même modèle, 'happy.ply' présenté dans la figure \ref{tab:modeles}, dans une scène. Les résultats de ce test de charge sont donnés dans la figure \ref{tab:charge_cg} pour les machines avec carte graphique, et dans la figure \ref{tab:charge_chip} pour les machines avec chipset.

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|}
      \hline
      Système d'exploitation & Windows 7 IntelCore I7 64bits & Windows 7 IntelCore I5 64bits & Windows 8 64 bits\\ \hline
      Carte graphique &  NVIDIA GetForce GTX 770 & NVIDIA GetForce GTX 760 & GT360M\\ \hline
      Mémoire RAM & 8GoDDR3 & 8GoDDR3 & 4GoDDR3 \\ \hline \hline
      543 652 sommets (1fois) & 60fps & 60fps & 84fps \\ \hline
      1 087 304 sommets (2fois) & 60fps & 60fps & 44fps \\ \hline
      1 630 956 sommets (3fois) & 60fps & 60fps & 30fps \\ \hline
      2 174 608 sommets (4fois) & 60fps & 60fps & 23fps \\ \hline
      2 718 260 sommets (5fois) & 60fps & 60fps & Out of Memory \\ \hline
      3 261 912 sommets (6fois) & 60fps & 60fps & Out of Memory \\ \hline
      3 805 564 sommets (7fois) & 60fps & 60fps & Out of Memory \\ \hline
      4 349 216 sommets (8fois) & Out of Memory & 60fps & Out of Memory  \\ \hline
      4 892 868 sommets (9 fois) & Out of Memory & Out of Memory & Out of Memory \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Test de charge sur les machines avec carte graphique}
  \label{tab:charge_cg}
\end{figure}

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|c|c|}
      \hline
      Système d'exploitation & Windows 7 IntelCore I5 & Fedora 21 IntelCore I3 & Debian Jessie IntelCore I7 & ArchLinux\\ \hline
      Chipset graphique &  Intel HD Graphics 4000 & Intel HD Graphics 4000 & Intel HD Graphics 4000 & Intel Mobile Series 4 \\ \hline
      Mémoire RAM & 8GoDDR3 & 4GoDDR3 & 4GoDDR3 & \\ \hline \hline
      543 652 sommets (1fois) & 55fps & 60fps & 47fps & 8fps\\ \hline
      1 087 304 sommets (2fois) & 29fps & 34fps & 24fps & Out of Memory\\ \hline
      1 630 956 sommets (3fois) & 20fps & 22fps & 16fps & Out of Memory \\ \hline
      2 174 608 sommets (4fois) & 15fps & 16fps & 11fps & Out of Memory \\ \hline
      2 718 260 sommets (5fois) & Out of Memory & 13fps & 9fps & Out of Memory \\ \hline
      3 261 912 sommets (6fois) & Out of Memory & 10fps & Out of Memory & Out of Memory \\ \hline
      3 805 564 sommets (7fois) & Out of Memory & 9fps & Out of Memory & Out of Memory \\ \hline
      4 349 216 sommets (8fois) & Out of Memory & 6fps & Out of Memory & Out of Memory \\ \hline
      4 892 868 sommets (9 fois) & Out of Memory & Out of Memory & Out of Memory & Out of Memory \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Test de charge sur les machines avec chipset graphique}
  \label{tab:charge_chip}
\end{figure}

\paragraph{}
Ce test de charge montre que les performances de notre logiciel sont bien supérieures à celles que nous espérions au moment de la rédaction du Cahier des charges. Toutefois, on remarque qu'à partir d'un certain nombre de points, le logiciel ne parvient plus à charger les objets faute de mémoire. En effet, chaque point est stocké en mémoire, ce qui prend de plus en plus de place et cause l'arrêt du logiciel lorsqu'il n'y a plus de place. 

\paragraph{}
Une amélioration a pu être faite sur le logiciel pour permettre le chargement de plus de points, grâce aux shaders. En effet, lors de l'affichage, les données à utiliser sont envoyées à la carte ou au processeur graphique qui les stocke. Cette méthode améliore la fluidité d'affichage car si ces données devaient être envoyées depuis le processeur jusqu'à la carte graphique à chaque rafraîchissement de la fenêtre, le rendu serait nettement moins rapide. Un autre effet positif de ce stockage dans la carte graphique est que les données n'ont plus besoin d'être stockées en mémoire une fois qu'elles ont été envoyées. Le processeur peut donc les libérer pour créer de nouveaux points, et augmenter le nombre de points possibles dans le scène, comme le montre les deux exemples fournis dans la figure \ref{tab:charge_v2}.

\begin{figure}[h]
  \begin{changemargin}{-4cm}{-4cm}
    \centering
    \begin{tabular}{|l|c|c|}
      \hline
      Système d'exploitation & Windows 7 IntelCore I7 64bits & Windows 7 IntelCore I5 64bits\\ \hline
      Carte graphique &  NVIDIA GetForce GTX 770 & Intel HD Graphics 4000\\ \hline
      Mémoire RAM & 8GoDDR3 & 8GoDDR3 \\ \hline \hline
      543 652 sommets (1fois) & 60fps & 55fps \\ \hline
      1 087 304 sommets (2fois) & 60fps & 29fps \\ \hline
      2 718 260 sommets (5fois) & 60fps & 12fps \\ \hline
      4 349 216 sommets (8fois) & 60fps & 8fps  \\ \hline
      4 892 868 sommets (9 fois) & 60fps  & Out of Memory \\ \hline
      7 067 476 sommets (13 fois) & 30fps & Out of Memory \\ \hline
      7 611 128 sommets (14 fois) & 25fps & Out of Memory \\ \hline
      8 154 780 sommets (15 fois) & 20fps & Out of Memory \\ \hline
      10 873 040 sommets (20 fois) & 11fps & Out of Memory \\ \hline
      13 591 300 sommets (25 fois) & 9fps & Out of Memory \\ \hline
      14 134 952 sommets (26 fois) & Out of Memory & Out of Memory \\ \hline
    \end{tabular}
  \end{changemargin}
  \caption{Test de charge sur les machines avec carte graphique}
  \label{tab:charge_v2}
\end{figure}

\subsubsection{Tests de profilage}
\paragraph{}
Pour s'assurer de la qualité du code, nous avons choisi d'utiliser l'outil Valgrind. Celui-ci permet notamment de détecter des fuites mémoire dans le déroulement du logiciel. Si toutes n'ont pas pu être évitées, l'utilisation des \texttt{std::unique\_ptr} ont permis de s'assurer que certaines instances ne pouvaient pas être dupliquées. Nous avons ainsi pu éviter de nombreuses fuites mémoires.


